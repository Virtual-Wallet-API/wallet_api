{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="/static/css/account.css">
{% endblock %}

{% block content %}
<div class="container account-overview-container">
    <div class="page-header">
        <h2>Account Overview</h2>
    </div>

    <!-- Account Balance and Buttons -->
    <div class="row balance-box-wrapper align-items-center">
        <div class="col-lg-7 col-md-12"> <!-- Adjusted column for better balance display -->
            <div class="balance-box">
                <div class="balance-content">
                    <h5 class="balance-title">CURRENT BALANCE</h5>
                    <div class="balance-amount-wrapper">
                        <i class="bi bi-wallet2 balance-icon"></i>
                        <p class="balance-amount mb-0" id="balance-amount"><i class="bi bi-arrow-repeat"></i></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-5 col-md-12 mt-3 mt-lg-0"> <!-- Buttons column -->
            <div class="action-buttons-wrapper justify-content-lg-end">
                <a href="/fe/transfer" class="btn btn-primary btn-action"> <!-- Link to transfer/send money page -->
                    <i class="bi bi-send"></i> Send Money
                </a>
                <a href="/fe/deposits" class="btn btn-outline-secondary btn-action"> <!-- Link to deposits page -->
                    <i class="bi bi-plus-circle"></i> Add Funds
                </a>
            </div>
        </div>
    </div>

    <!-- Recent Transactions -->
    <div class="items-list-container">
        <div class="section-toggle" id="transactions-toggle" tabindex="0" aria-expanded="true"
             aria-controls="transactions-list-content">
            <h3>Recent Transactions</h3>
            <i class="bi bi-chevron-down"></i>
        </div>
        <div class="items-list show" id="transactions-list-content"> <!-- Initially shown -->
            <div class="list-loading-container" id="transactions-loading-alert"><i class="bi bi-arrow-repeat"></i></div>
            <div id="initial-transactions-list">
                <!-- Transaction items will be inserted here -->
            </div>
            <div id="additional-transactions-list" class="items-list-more"
                 style="max-height: 0; opacity: 0; overflow: hidden;"> <!-- For "View More" -->
                <!-- Additional transaction items will be inserted here -->
            </div>
            <div class="view-more-button-container" id="view-transactions-btn-container" style="display: none;">
                <a class="btn btn-outline-primary btn-view-more" href="#" id="view-transactions-btn">View More</a>
            </div>
        </div>
    </div>

    <!-- Recent Deposits -->
    <div class="items-list-container">
        <div class="section-toggle" id="deposits-toggle" tabindex="0" aria-expanded="true"
             aria-controls="deposits-list-content">
            <h3>Recent Deposits</h3>
            <i class="bi bi-chevron-down"></i>
        </div>
        <div class="items-list show" id="deposits-list-content"> <!-- Initially shown -->
            <div class="list-loading-container" id="deposits-loading-alert"><i class="bi bi-arrow-repeat"></i></div>
            <div id="initial-deposits-list">
                <!-- Deposit items will be inserted here -->
            </div>
            <div id="additional-deposits-list" class="items-list-more"
                 style="max-height: 0; opacity: 0; overflow: hidden;"> <!-- For "View More" -->
                <!-- Additional deposit items will be inserted here -->
            </div>
            <div class="view-more-button-container" id="view-deposits-btn-container" style="display: none;">
                <a class="btn btn-outline-primary btn-view-more" href="#" id="view-deposits-btn">View More</a>
            </div>
        </div>
    </div>

    <!-- Add padding to clear fixed footer -->
    <div style="padding-bottom: 80px;"></div>
</div>
{% endblock %}

{% block modals %}
<div aria-hidden="true" aria-labelledby="transactionModalLabel" class="modal fade" id="transactionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered"> <!-- Centered modal -->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="transactionModalLabel">Transaction Details</h5>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <p><strong>Date:</strong> <span id="modal-date"></span></p>
                <p><strong>Description:</strong> <span id="modal-description"></span></p>
                <p><strong>Amount:</strong> <span id="modal-amount"></span></p>
                <p><strong>Category:</strong> <span id="modal-category"></span></p>
                <p><strong>Status:</strong> <span id="modal-status"></span></p> <!-- Added Status -->
                <p><strong>Reference ID:</strong> <span id="modal-ref-id"></span></p> <!-- Added Ref ID -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-bs-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="/static/js/account.js"></script>
{% endblock %}