{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="/old/old_static/css/contacts.css">
{% endblock %}

{% block content %}
<div class="contacts-page-container">
    <h2 class="contacts-title-main">Contacts</h2>

    <!-- Add Contact Form -->
    <div class="section-toggle" id="add-contact-toggle" tabindex="0" aria-expanded="false" aria-controls="add-contact-box">
        <h3>Add Contact</h3>
        <i class="bi bi-chevron-down"></i>
    </div>
    <div class="contact-form-box" id="add-contact-box">
        <div class="form-message alert alert-success" id="success-message"></div>
        <div class="form-message alert alert-danger" id="error-message"></div>

        <form id="add-contact-form" method="POST">
            <div class="form-group">
                <label for="contact-identifier">Search User</label>
                <input class="form-control" id="contact-identifier" name="identifier" placeholder="Enter username, email or phone number" required type="text">
            </div>

            <button class="btn btn-confirm-contact" id="submit-button" type="submit">
                <span id="button-text">Add Contact</span>
                <span id="spinner" style="display: none;"><i class="bi bi-arrow-repeat"></i> Processing...</span>
            </button>
        </form>
    </div>

    <!-- Search Contacts -->

    <!-- Contacts List -->
    <div class="section-toggle" id="contacts-toggle" tabindex="0" aria-expanded="true" aria-controls="contacts-list-content">
        <h3>My Contacts</h3>
        <i class="bi bi-chevron-down"></i>
    </div>
    <div class="contacts-list show" id="contacts-list-content">
        <div class="search-box">
            <div class="form-group">
                <input class="form-control" id="search-contacts" placeholder="Search contacts..." type="text">
            </div>
        </div>
        <div class="list-loading-container" id="contacts-loading"><i class="bi bi-arrow-repeat"></i></div>
        <div id="initial-contacts">
            <!-- Contact items will be inserted here by JS -->
        </div>
        <div id="additional-contacts" class="items-list-more" style="max-height: 0; opacity: 0; overflow: hidden;">
            <!-- Additional contact items -->
        </div>
        <div class="view-more-button-container" id="view-more-contacts-btn-container" style="display: none;">
            <a class="btn btn-outline-primary btn-view-more" href="#" id="view-contacts-btn">View More</a>
        </div>
    </div>

    <!-- Add padding to clear fixed footer -->
    <div style="padding-bottom: 80px;"></div>
</div>
{% endblock %}

{% block modals %}
<!-- Contact Details Modal -->
<div class="modal fade modal-contact-details" id="contactDetailsModal" tabindex="-1" aria-labelledby="contactDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="contactDetailsModalLabel">Contact Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Username:</strong> <span id="modal-username"></span></p>
                <p><strong>Email:</strong> <span id="modal-email"></span></p>
                <p><strong>Phone:</strong> <span id="modal-phone"></span></p>
                <p><strong>Status:</strong> <span id="modal-status"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="create-transaction-btn">Create Transaction</button>
                <button type="button" class="btn btn-danger" id="remove-contact-btn">Remove Contact</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="/old/old_static/js/contacts.js"></script>
{% endblock %}